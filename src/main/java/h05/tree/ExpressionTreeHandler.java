package h05.tree;

import h05.exception.BadOperationException;
import h05.exception.ParenthesesMismatchException;
import h05.exception.UndefinedOperatorException;
import h05.math.MyNumber;

import java.util.Iterator;
import java.util.List;
import java.util.Map;

/**
 * This class is used to parse an expression and build a tree out of it.
 *
 * @author Nhan Huynh
 */
public final class ExpressionTreeHandler {

    /**
     * Don't let anyone instantiate this class.
     */
    private ExpressionTreeHandler() {
    }

    /**
     * Builds an arithmetic expression tree from a string recursively.
     *
     * @param expression the string representation of the arithmetic expression to parse
     * @return the root node of the arithmetic expression tree
     * @throws BadOperationException        if the iterator has no more tokens
     * @throws ParenthesesMismatchException if the parentheses are mismatched
     * @throws UndefinedOperatorException   if the operator is not defined
     */
    public static ArithmeticExpressionNode buildRecursively(Iterator<String> expression) {
        if(!expression.hasNext())
            throw new BadOperationException("No expression");
        //ArithmeticExpressionNode root = expression.next();
        //Map<String, MyNumber> identifiers = Map.
        //ArithmeticExpressionEvaluator root = new ArithmeticExpressionEvaluator();
        return new IdentifierExpressionNode("HELP");
    }

    /**
     * Builds an arithmetic expression tree from a string iteratively.
     *
     * @param expression the string representation of the arithmetic expression to parse
     * @return the root node of the arithmetic expression tree
     * @throws BadOperationException        if the iterator has no more tokens
     * @throws ParenthesesMismatchException if the parentheses are mismatched
     * @throws UndefinedOperatorException   if the operator is not defined
     */
    public static ArithmeticExpressionNode buildIteratively(Iterator<String> expression) {
        throw new RuntimeException("H4.2 - not implemented"); // TODO: H4.2 - remove if implemented
    }

    /**
     * Reconstructs the string representation of the arithmetic expression tree.
     *
     * @param root the root node of the arithmetic expression tree
     * @return the string representation of the arithmetic expression tree
     */
    public static List<String> reconstruct(ArithmeticExpressionNode root) {
        throw new RuntimeException("H4.3 - not implemented"); // TODO: H4.3 - remove if implemented
    }
}
